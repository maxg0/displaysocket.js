var DisplaySocket=function(a){function b(a,b){this.count=a,this.dataCodewords=b,this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("DataCodewords",function(){return this.dataCodewords})}function c(a,b,c){this.ecCodewordsPerBlock=a,this.ecBlocks=c?new Array(b,c):new Array(b),this.__defineGetter__("ECCodewordsPerBlock",function(){return this.ecCodewordsPerBlock}),this.__defineGetter__("TotalECCodewords",function(){return this.ecCodewordsPerBlock*this.NumBlocks}),this.__defineGetter__("NumBlocks",function(){for(var a=0,b=0;b<this.ecBlocks.length;b++)a+=this.ecBlocks[b].length;return a}),this.getECBlocks=function(){return this.ecBlocks}}function d(a,b,c,d,e,f){this.versionNumber=a,this.alignmentPatternCenters=b,this.ecBlocks=new Array(c,d,e,f);for(var g=0,h=c.ECCodewordsPerBlock,i=c.getECBlocks(),j=0;j<i.length;j++){var l=i[j];g+=l.Count*(l.DataCodewords+h)}this.totalCodewords=g,this.__defineGetter__("VersionNumber",function(){return this.versionNumber}),this.__defineGetter__("AlignmentPatternCenters",function(){return this.alignmentPatternCenters}),this.__defineGetter__("TotalCodewords",function(){return this.totalCodewords}),this.__defineGetter__("DimensionForVersion",function(){return 17+4*this.versionNumber}),this.buildFunctionPattern=function(){var a=this.DimensionForVersion,b=new k(a);b.setRegion(0,0,9,9),b.setRegion(a-8,0,8,9),b.setRegion(0,a-8,9,8);for(var c=this.alignmentPatternCenters.length,d=0;d<c;d++)for(var e=this.alignmentPatternCenters[d]-2,f=0;f<c;f++)0==d&&(0==f||f==c-1)||d==c-1&&0==f||b.setRegion(this.alignmentPatternCenters[f]-2,e,5,5);return b.setRegion(6,9,1,a-17),b.setRegion(9,6,a-17,1),this.versionNumber>6&&(b.setRegion(a-11,0,3,6),b.setRegion(0,a-11,6,3)),b},this.getECBlocksForLevel=function(a){return this.ecBlocks[a.ordinal()]}}function e(){return new Array(new d(1,new Array,new c(7,new b(1,19)),new c(10,new b(1,16)),new c(13,new b(1,13)),new c(17,new b(1,9))),new d(2,new Array(6,18),new c(10,new b(1,34)),new c(16,new b(1,28)),new c(22,new b(1,22)),new c(28,new b(1,16))),new d(3,new Array(6,22),new c(15,new b(1,55)),new c(26,new b(1,44)),new c(18,new b(2,17)),new c(22,new b(2,13))),new d(4,new Array(6,26),new c(20,new b(1,80)),new c(18,new b(2,32)),new c(26,new b(2,24)),new c(16,new b(4,9))),new d(5,new Array(6,30),new c(26,new b(1,108)),new c(24,new b(2,43)),new c(18,new b(2,15),new b(2,16)),new c(22,new b(2,11),new b(2,12))),new d(6,new Array(6,34),new c(18,new b(2,68)),new c(16,new b(4,27)),new c(24,new b(4,19)),new c(28,new b(4,15))),new d(7,new Array(6,22,38),new c(20,new b(2,78)),new c(18,new b(4,31)),new c(18,new b(2,14),new b(4,15)),new c(26,new b(4,13),new b(1,14))),new d(8,new Array(6,24,42),new c(24,new b(2,97)),new c(22,new b(2,38),new b(2,39)),new c(22,new b(4,18),new b(2,19)),new c(26,new b(4,14),new b(2,15))),new d(9,new Array(6,26,46),new c(30,new b(2,116)),new c(22,new b(3,36),new b(2,37)),new c(20,new b(4,16),new b(4,17)),new c(24,new b(4,12),new b(4,13))),new d(10,new Array(6,28,50),new c(18,new b(2,68),new b(2,69)),new c(26,new b(4,43),new b(1,44)),new c(24,new b(6,19),new b(2,20)),new c(28,new b(6,15),new b(2,16))),new d(11,new Array(6,30,54),new c(20,new b(4,81)),new c(30,new b(1,50),new b(4,51)),new c(28,new b(4,22),new b(4,23)),new c(24,new b(3,12),new b(8,13))),new d(12,new Array(6,32,58),new c(24,new b(2,92),new b(2,93)),new c(22,new b(6,36),new b(2,37)),new c(26,new b(4,20),new b(6,21)),new c(28,new b(7,14),new b(4,15))),new d(13,new Array(6,34,62),new c(26,new b(4,107)),new c(22,new b(8,37),new b(1,38)),new c(24,new b(8,20),new b(4,21)),new c(22,new b(12,11),new b(4,12))),new d(14,new Array(6,26,46,66),new c(30,new b(3,115),new b(1,116)),new c(24,new b(4,40),new b(5,41)),new c(20,new b(11,16),new b(5,17)),new c(24,new b(11,12),new b(5,13))),new d(15,new Array(6,26,48,70),new c(22,new b(5,87),new b(1,88)),new c(24,new b(5,41),new b(5,42)),new c(30,new b(5,24),new b(7,25)),new c(24,new b(11,12),new b(7,13))),new d(16,new Array(6,26,50,74),new c(24,new b(5,98),new b(1,99)),new c(28,new b(7,45),new b(3,46)),new c(24,new b(15,19),new b(2,20)),new c(30,new b(3,15),new b(13,16))),new d(17,new Array(6,30,54,78),new c(28,new b(1,107),new b(5,108)),new c(28,new b(10,46),new b(1,47)),new c(28,new b(1,22),new b(15,23)),new c(28,new b(2,14),new b(17,15))),new d(18,new Array(6,30,56,82),new c(30,new b(5,120),new b(1,121)),new c(26,new b(9,43),new b(4,44)),new c(28,new b(17,22),new b(1,23)),new c(28,new b(2,14),new b(19,15))),new d(19,new Array(6,30,58,86),new c(28,new b(3,113),new b(4,114)),new c(26,new b(3,44),new b(11,45)),new c(26,new b(17,21),new b(4,22)),new c(26,new b(9,13),new b(16,14))),new d(20,new Array(6,34,62,90),new c(28,new b(3,107),new b(5,108)),new c(26,new b(3,41),new b(13,42)),new c(30,new b(15,24),new b(5,25)),new c(28,new b(15,15),new b(10,16))),new d(21,new Array(6,28,50,72,94),new c(28,new b(4,116),new b(4,117)),new c(26,new b(17,42)),new c(28,new b(17,22),new b(6,23)),new c(30,new b(19,16),new b(6,17))),new d(22,new Array(6,26,50,74,98),new c(28,new b(2,111),new b(7,112)),new c(28,new b(17,46)),new c(30,new b(7,24),new b(16,25)),new c(24,new b(34,13))),new d(23,new Array(6,30,54,74,102),new c(30,new b(4,121),new b(5,122)),new c(28,new b(4,47),new b(14,48)),new c(30,new b(11,24),new b(14,25)),new c(30,new b(16,15),new b(14,16))),new d(24,new Array(6,28,54,80,106),new c(30,new b(6,117),new b(4,118)),new c(28,new b(6,45),new b(14,46)),new c(30,new b(11,24),new b(16,25)),new c(30,new b(30,16),new b(2,17))),new d(25,new Array(6,32,58,84,110),new c(26,new b(8,106),new b(4,107)),new c(28,new b(8,47),new b(13,48)),new c(30,new b(7,24),new b(22,25)),new c(30,new b(22,15),new b(13,16))),new d(26,new Array(6,30,58,86,114),new c(28,new b(10,114),new b(2,115)),new c(28,new b(19,46),new b(4,47)),new c(28,new b(28,22),new b(6,23)),new c(30,new b(33,16),new b(4,17))),new d(27,new Array(6,34,62,90,118),new c(30,new b(8,122),new b(4,123)),new c(28,new b(22,45),new b(3,46)),new c(30,new b(8,23),new b(26,24)),new c(30,new b(12,15),new b(28,16))),new d(28,new Array(6,26,50,74,98,122),new c(30,new b(3,117),new b(10,118)),new c(28,new b(3,45),new b(23,46)),new c(30,new b(4,24),new b(31,25)),new c(30,new b(11,15),new b(31,16))),new d(29,new Array(6,30,54,78,102,126),new c(30,new b(7,116),new b(7,117)),new c(28,new b(21,45),new b(7,46)),new c(30,new b(1,23),new b(37,24)),new c(30,new b(19,15),new b(26,16))),new d(30,new Array(6,26,52,78,104,130),new c(30,new b(5,115),new b(10,116)),new c(28,new b(19,47),new b(10,48)),new c(30,new b(15,24),new b(25,25)),new c(30,new b(23,15),new b(25,16))),new d(31,new Array(6,30,56,82,108,134),new c(30,new b(13,115),new b(3,116)),new c(28,new b(2,46),new b(29,47)),new c(30,new b(42,24),new b(1,25)),new c(30,new b(23,15),new b(28,16))),new d(32,new Array(6,34,60,86,112,138),new c(30,new b(17,115)),new c(28,new b(10,46),new b(23,47)),new c(30,new b(10,24),new b(35,25)),new c(30,new b(19,15),new b(35,16))),new d(33,new Array(6,30,58,86,114,142),new c(30,new b(17,115),new b(1,116)),new c(28,new b(14,46),new b(21,47)),new c(30,new b(29,24),new b(19,25)),new c(30,new b(11,15),new b(46,16))),new d(34,new Array(6,34,62,90,118,146),new c(30,new b(13,115),new b(6,116)),new c(28,new b(14,46),new b(23,47)),new c(30,new b(44,24),new b(7,25)),new c(30,new b(59,16),new b(1,17))),new d(35,new Array(6,30,54,78,102,126,150),new c(30,new b(12,121),new b(7,122)),new c(28,new b(12,47),new b(26,48)),new c(30,new b(39,24),new b(14,25)),new c(30,new b(22,15),new b(41,16))),new d(36,new Array(6,24,50,76,102,128,154),new c(30,new b(6,121),new b(14,122)),new c(28,new b(6,47),new b(34,48)),new c(30,new b(46,24),new b(10,25)),new c(30,new b(2,15),new b(64,16))),new d(37,new Array(6,28,54,80,106,132,158),new c(30,new b(17,122),new b(4,123)),new c(28,new b(29,46),new b(14,47)),new c(30,new b(49,24),new b(10,25)),new c(30,new b(24,15),new b(46,16))),new d(38,new Array(6,32,58,84,110,136,162),new c(30,new b(4,122),new b(18,123)),new c(28,new b(13,46),new b(32,47)),new c(30,new b(48,24),new b(14,25)),new c(30,new b(42,15),new b(32,16))),new d(39,new Array(6,26,54,82,110,138,166),new c(30,new b(20,117),new b(4,118)),new c(28,new b(40,47),new b(7,48)),new c(30,new b(43,24),new b(22,25)),new c(30,new b(10,15),new b(67,16))),new d(40,new Array(6,30,58,86,114,142,170),new c(30,new b(19,118),new b(6,119)),new c(28,new b(18,47),new b(31,48)),new c(30,new b(34,24),new b(34,25)),new c(30,new b(20,15),new b(61,16))))}function f(a,b,c,d,e,g,h,i,j){this.a11=a,this.a12=d,this.a13=h,this.a21=b,this.a22=e,this.a23=i,this.a31=c,this.a32=g,this.a33=j,this.transformPoints1=function(a){for(var b=a.length,c=this.a11,d=this.a12,e=this.a13,f=this.a21,g=this.a22,h=this.a23,i=this.a31,j=this.a32,k=this.a33,l=0;l<b;l+=2){var m=a[l],n=a[l+1],o=e*m+h*n+k;a[l]=(c*m+f*n+i)/o,a[l+1]=(d*m+g*n+j)/o}},this.transformPoints2=function(a,b){for(var c=a.length,d=0;d<c;d++){var e=a[d],f=b[d],g=this.a13*e+this.a23*f+this.a33;a[d]=(this.a11*e+this.a21*f+this.a31)/g,b[d]=(this.a12*e+this.a22*f+this.a32)/g}},this.buildAdjoint=function(){return new f(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(a){return new f(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}function g(a,b){this.bits=a,this.points=b}function h(a){this.image=a,this.resultPointCallback=null,this.sizeOfBlackWhiteBlackRun=function(a,b,c,d){var e=Math.abs(d-b)>Math.abs(c-a);if(e){var f=a;a=b,b=f,f=c,c=d,d=f}for(var g=Math.abs(c-a),h=Math.abs(d-b),i=-g>>1,j=b<d?1:-1,k=a<c?1:-1,l=0,m=a,n=b;m!=c;m+=k){var o=e?n:m,p=e?m:n;if(1==l?this.image[o+p*P.width]&&l++:this.image[o+p*P.width]||l++,3==l){var q=m-a,r=n-b;return Math.sqrt(q*q+r*r)}if((i+=h)>0){if(n==d)break;n+=j,i-=g}}var s=c-a,t=d-b;return Math.sqrt(s*s+t*t)},this.sizeOfBlackWhiteBlackRunBothWays=function(a,b,c,d){var e=this.sizeOfBlackWhiteBlackRun(a,b,c,d),f=1,g=a-(c-a);g<0?(f=a/(a-g),g=0):g>=P.width&&(f=(P.width-1-a)/(g-a),g=P.width-1);var h=Math.floor(b-(d-b)*f);return f=1,h<0?(f=b/(b-h),h=0):h>=P.height&&(f=(P.height-1-b)/(h-b),h=P.height-1),g=Math.floor(a+(g-a)*f),(e+=this.sizeOfBlackWhiteBlackRun(a,b,g,h))-1},this.calculateModuleSizeOneWay=function(a,b){var c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.X),Math.floor(a.Y),Math.floor(b.X),Math.floor(b.Y)),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(b.X),Math.floor(b.Y),Math.floor(a.X),Math.floor(a.Y));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14},this.calculateModuleSize=function(a,b,c){return(this.calculateModuleSizeOneWay(a,b)+this.calculateModuleSizeOneWay(a,c))/2},this.distance=function(a,b){return xDiff=a.X-b.X,yDiff=a.Y-b.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)},this.computeDimension=function(a,b,c,d){var e=Math.round(this.distance(a,b)/d),f=Math.round(this.distance(a,c)/d),g=7+(e+f>>1);switch(3&g){case 0:g++;break;case 2:g--;break;case 3:throw"Error"}return g},this.findAlignmentInRegion=function(a,b,c,d){var e=Math.floor(d*a),f=Math.max(0,b-e),g=Math.min(P.width-1,b+e);if(g-f<3*a)throw"Error";var h=Math.max(0,c-e),i=Math.min(P.height-1,c+e);return new E(this.image,f,h,g-f,i-h,a,this.resultPointCallback).find()},this.createTransform=function(a,b,c,d,e){var g,h,i,j,k=e-3.5;return null!=d?(g=d.X,h=d.Y,i=j=k-3):(g=b.X-a.X+c.X,h=b.Y-a.Y+c.Y,i=j=k),f.quadrilateralToQuadrilateral(3.5,3.5,k,3.5,i,j,3.5,k,a.X,a.Y,b.X,b.Y,g,h,c.X,c.Y)},this.sampleGrid=function(a,b,c){return M.sampleGrid3(a,c,b)},this.processFinderPatternInfo=function(a){var b=a.TopLeft,c=a.TopRight,e=a.BottomLeft,f=this.calculateModuleSize(b,c,e);if(f<1)throw"Error";var h=this.computeDimension(b,c,e,f),i=d.getProvisionalVersionForDimension(h),j=i.DimensionForVersion-7,k=null;if(i.AlignmentPatternCenters.length>0)for(var l=c.X-b.X+e.X,m=c.Y-b.Y+e.Y,n=1-3/j,o=Math.floor(b.X+n*(l-b.X)),p=Math.floor(b.Y+n*(m-b.Y)),q=4;q<=16;q<<=1){k=this.findAlignmentInRegion(f,o,p,q);break}var r,s=this.createTransform(b,c,e,k,h),t=this.sampleGrid(this.image,s,h);return r=null==k?new Array(e,b,c):new Array(e,b,c,k),new g(t,r)},this.detect=function(){var a=(new C).findFinderPattern(this.image);return this.processFinderPatternInfo(a)}}function i(a){this.errorCorrectionLevel=j.forBits(a>>3&3),this.dataMask=7&a,this.__defineGetter__("ErrorCorrectionLevel",function(){return this.errorCorrectionLevel}),this.__defineGetter__("DataMask",function(){return this.dataMask}),this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|dataMask},this.Equals=function(a){var b=a;return this.errorCorrectionLevel==b.errorCorrectionLevel&&this.dataMask==b.dataMask}}function j(a,b,c){this.ordinal_Renamed_Field=a,this.bits=b,this.name=c,this.__defineGetter__("Bits",function(){return this.bits}),this.__defineGetter__("Name",function(){return this.name}),this.ordinal=function(){return this.ordinal_Renamed_Field}}function k(a,b){if(b||(b=a),a<1||b<1)throw"Both dimensions must be greater than 0";this.width=a,this.height=b;var c=a>>5;0!=(31&a)&&c++,this.rowSize=c,this.bits=new Array(c*b);for(var d=0;d<this.bits.length;d++)this.bits[d]=0;this.__defineGetter__("Width",function(){return this.width}),this.__defineGetter__("Height",function(){return this.height}),this.__defineGetter__("Dimension",function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}),this.get_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);return 0!=(1&z(this.bits[c],31&a))},this.set_Renamed=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]|=1<<(31&a)},this.flip=function(a,b){var c=b*this.rowSize+(a>>5);this.bits[c]^=1<<(31&a)},this.clear=function(){for(var a=this.bits.length,b=0;b<a;b++)this.bits[b]=0},this.setRegion=function(a,b,c,d){if(b<0||a<0)throw"Left and top must be nonnegative";if(d<1||c<1)throw"Height and width must be at least 1";var e=a+c,f=b+d;if(f>this.height||e>this.width)throw"The region must fit inside the matrix";for(var g=b;g<f;g++)for(var h=g*this.rowSize,i=a;i<e;i++)this.bits[h+(i>>5)]|=1<<(31&i)}}function l(a,b){this.numDataCodewords=a,this.codewords=b,this.__defineGetter__("NumDataCodewords",function(){return this.numDataCodewords}),this.__defineGetter__("Codewords",function(){return this.codewords})}function m(a){var b=a.Dimension;if(b<21||1!=(3&b))throw"Error BitMatrixParser";this.bitMatrix=a,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(a,b,c){return this.bitMatrix.get_Renamed(a,b)?c<<1|1:c<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var a=0,b=0;b<6;b++)a=this.copyBit(b,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(var c=5;c>=0;c--)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=i.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var d=this.bitMatrix.Dimension;a=0;for(var e=d-8,b=d-1;b>=e;b--)a=this.copyBit(b,8,a);for(var c=d-7;c<d;c++)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=i.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var a=this.bitMatrix.Dimension,b=a-17>>2;if(b<=6)return d.getVersionForNumber(b);for(var c=0,e=a-11,f=5;f>=0;f--)for(var g=a-9;g>=e;g--)c=this.copyBit(g,f,c);if(this.parsedVersion=d.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;c=0;for(var g=5;g>=0;g--)for(var f=a-9;f>=e;f--)c=this.copyBit(g,f,c);if(this.parsedVersion=d.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var a=this.readFormatInformation(),b=this.readVersion(),c=N.forReference(a.DataMask),d=this.bitMatrix.Dimension;c.unmaskBitMatrix(this.bitMatrix,d);for(var e=b.buildFunctionPattern(),f=!0,g=new Array(b.TotalCodewords),h=0,i=0,j=0,k=d-1;k>0;k-=2){6==k&&k--;for(var l=0;l<d;l++)for(var m=f?d-1-l:l,n=0;n<2;n++)e.get_Renamed(k-n,m)||(j++,i<<=1,this.bitMatrix.get_Renamed(k-n,m)&&(i|=1),8==j&&(g[h++]=i,j=0,i=0));f^=!0}if(h!=b.TotalCodewords)throw"Error readCodewords";return g}}function n(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(a+b&1)}}function o(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(1&a)}}function q(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return b%3==0}}function r(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return(a+b)%3==0}}function s(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==(z(a,1)+b/3&1)}}function t(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return(1&c)+c%3==0}}function u(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){var c=a*b;return 0==((1&c)+c%3&1)}}function v(){this.unmaskBitMatrix=function(a,b){for(var c=0;c<b;c++)for(var d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)},this.isMasked=function(a,b){return 0==((a+b&1)+a*b%3&1)}}function w(a){this.field=a,this.decode=function(a,b){for(var c=new x(this.field,a),d=new Array(b),e=0;e<d.length;e++)d[e]=0;for(var f=!1,g=!0,e=0;e<b;e++){var h=c.evaluateAt(this.field.exp(f?e+1:e));d[d.length-1-e]=h,0!=h&&(g=!1)}if(!g)for(var i=new x(this.field,d),j=this.runEuclideanAlgorithm(this.field.buildMonomial(b,1),i,b),k=j[0],l=j[1],m=this.findErrorLocations(k),n=this.findErrorMagnitudes(l,m,f),e=0;e<m.length;e++){var o=a.length-1-this.field.log(m[e]);if(o<0)throw"ReedSolomonException Bad error location";a[o]=y.addOrSubtract(a[o],n[e])}},this.runEuclideanAlgorithm=function(a,b,c){if(a.Degree<b.Degree){var d=a;a=b,b=d}for(var e=a,f=b,g=this.field.One,h=this.field.Zero,i=this.field.Zero,j=this.field.One;f.Degree>=Math.floor(c/2);){var k=e,l=g,m=i;if(e=f,g=h,i=j,e.Zero)throw"r_{i-1} was zero";f=k;for(var n=this.field.Zero,o=e.getCoefficient(e.Degree),p=this.field.inverse(o);f.Degree>=e.Degree&&!f.Zero;){var q=f.Degree-e.Degree,r=this.field.multiply(f.getCoefficient(f.Degree),p);n=n.addOrSubtract(this.field.buildMonomial(q,r)),f=f.addOrSubtract(e.multiplyByMonomial(q,r))}h=n.multiply1(g).addOrSubtract(l),j=n.multiply1(i).addOrSubtract(m)}var s=j.getCoefficient(0);if(0==s)throw"ReedSolomonException sigmaTilde(0) was zero";var t=this.field.inverse(s),u=j.multiply2(t),v=f.multiply2(t);return new Array(u,v)},this.findErrorLocations=function(a){var b=a.Degree;if(1==b)return new Array(a.getCoefficient(1));for(var c=new Array(b),d=0,e=1;e<256&&d<b;e++)0==a.evaluateAt(e)&&(c[d]=this.field.inverse(e),d++);if(d!=b)throw"Error locator degree does not match number of roots";return c},this.findErrorMagnitudes=function(a,b,c){for(var d=b.length,e=new Array(d),f=0;f<d;f++){for(var g=this.field.inverse(b[f]),h=1,i=0;i<d;i++)f!=i&&(h=this.field.multiply(h,y.addOrSubtract(1,this.field.multiply(b[i],g))));e[f]=this.field.multiply(a.evaluateAt(g),this.field.inverse(h)),c&&(e[f]=this.field.multiply(e[f],g))}return e}}function x(a,b){if(null==b||0==b.length)throw"System.ArgumentException";this.field=a;var c=b.length;if(c>1&&0==b[0]){for(var d=1;d<c&&0==b[d];)d++;if(d==c)this.coefficients=a.Zero.coefficients;else{this.coefficients=new Array(c-d);for(var e=0;e<this.coefficients.length;e++)this.coefficients[e]=0;for(var f=0;f<this.coefficients.length;f++)this.coefficients[f]=b[d+f]}}else this.coefficients=b;this.__defineGetter__("Zero",function(){return 0==this.coefficients[0]}),this.__defineGetter__("Degree",function(){return this.coefficients.length-1}),this.__defineGetter__("Coefficients",function(){return this.coefficients}),this.getCoefficient=function(a){return this.coefficients[this.coefficients.length-1-a]},this.evaluateAt=function(a){if(0==a)return this.getCoefficient(0);var b=this.coefficients.length;if(1==a){for(var c=0,d=0;d<b;d++)c=y.addOrSubtract(c,this.coefficients[d]);return c}for(var e=this.coefficients[0],d=1;d<b;d++)e=y.addOrSubtract(this.field.multiply(a,e),this.coefficients[d]);return e},this.addOrSubtract=function(b){if(this.field!=b.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return b;if(b.Zero)return this;var c=this.coefficients,d=b.coefficients;if(c.length>d.length){var e=c;c=d,d=e}for(var f=new Array(d.length),g=d.length-c.length,h=0;h<g;h++)f[h]=d[h];for(var i=g;i<d.length;i++)f[i]=y.addOrSubtract(c[i-g],d[i]);return new x(a,f)},this.multiply1=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||a.Zero)return this.field.Zero;for(var b=this.coefficients,c=b.length,d=a.coefficients,e=d.length,f=new Array(c+e-1),g=0;g<c;g++)for(var h=b[g],i=0;i<e;i++)f[g+i]=y.addOrSubtract(f[g+i],this.field.multiply(h,d[i]));return new x(this.field,f)},this.multiply2=function(a){if(0==a)return this.field.Zero;if(1==a)return this;for(var b=this.coefficients.length,c=new Array(b),d=0;d<b;d++)c[d]=this.field.multiply(this.coefficients[d],a);return new x(this.field,c)},this.multiplyByMonomial=function(a,b){if(a<0)throw"System.ArgumentException";if(0==b)return this.field.Zero;for(var c=this.coefficients.length,d=new Array(c+a),e=0;e<d.length;e++)d[e]=0;for(var e=0;e<c;e++)d[e]=this.field.multiply(this.coefficients[e],b);return new x(this.field,d)},this.divide=function(a){if(this.field!=a.field)throw"GF256Polys do not have same GF256 field";if(a.Zero)throw"Divide by 0";for(var b=this.field.Zero,c=this,d=a.getCoefficient(a.Degree),e=this.field.inverse(d);c.Degree>=a.Degree&&!c.Zero;){var f=c.Degree-a.Degree,g=this.field.multiply(c.getCoefficient(c.Degree),e),h=a.multiplyByMonomial(f,g),i=this.field.buildMonomial(f,g);b=b.addOrSubtract(i),c=c.addOrSubtract(h)}return new Array(b,c)}}function y(a){this.expTable=new Array(256),this.logTable=new Array(256);for(var b=1,c=0;c<256;c++)this.expTable[c]=b,(b<<=1)>=256&&(b^=a);for(var c=0;c<255;c++)this.logTable[this.expTable[c]]=c;var d=new Array(1);d[0]=0,this.zero=new x(this,new Array(d));var e=new Array(1);e[0]=1,this.one=new x(this,new Array(e)),this.__defineGetter__("Zero",function(){return this.zero}),this.__defineGetter__("One",function(){return this.one}),this.buildMonomial=function(a,b){if(a<0)throw"System.ArgumentException";if(0==b)return zero;for(var c=new Array(a+1),d=0;d<c.length;d++)c[d]=0;return c[0]=b,new x(this,c)},this.exp=function(a){return this.expTable[a]},this.log=function(a){if(0==a)throw"System.ArgumentException";return this.logTable[a]},this.inverse=function(a){if(0==a)throw"System.ArithmeticException";return this.expTable[255-this.logTable[a]]},this.multiply=function(a,b){return 0==a||0==b?0:1==a?b:1==b?a:this.expTable[(this.logTable[a]+this.logTable[b])%255]}}function z(a,b){return a>=0?a>>b:(a>>b)+(2<<~b)}function A(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return this.x}),this.__defineGetter__("Y",function(){return this.y}),this.incrementCount=function(){this.count++},this.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return d<=1||d/this.estimatedModuleSize<=1}return!1}}function B(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2],this.__defineGetter__("BottomLeft",function(){return this.bottomLeft}),this.__defineGetter__("TopLeft",function(){return this.topLeft}),this.__defineGetter__("TopRight",function(){return this.topRight})}function C(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=new Array(0,0,0,0,0),this.resultPointCallback=null,this.__defineGetter__("CrossCheckStateCount",function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}),this.foundPatternCross=function(a){for(var b=0,c=0;c<5;c++){var d=a[c];if(0==d)return!1;b+=d}if(b<7)return!1;var e=Math.floor((b<<_)/7),f=Math.floor(e/2);return Math.abs(e-(a[0]<<_))<f&&Math.abs(e-(a[1]<<_))<f&&Math.abs(3*e-(a[2]<<_))<3*f&&Math.abs(e-(a[3]<<_))<f&&Math.abs(e-(a[4]<<_))<f},this.centerFromEnd=function(a,b){return b-a[4]-a[3]-a[2]/2},this.crossCheckVertical=function(a,b,c,d){for(var e=this.image,f=P.height,g=this.CrossCheckStateCount,h=a;h>=0&&e[b+h*P.width];)g[2]++,h--;if(h<0)return NaN;for(;h>=0&&!e[b+h*P.width]&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&e[b+h*P.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e[b+h*P.width];)g[2]++,h++;if(h==f)return NaN;for(;h<f&&!e[b+h*P.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;h<f&&e[b+h*P.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},this.crossCheckHorizontal=function(a,b,c,d){for(var e=this.image,f=P.width,g=this.CrossCheckStateCount,h=a;h>=0&&e[h+b*P.width];)g[2]++,h--;if(h<0)return NaN;for(;h>=0&&!e[h+b*P.width]&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&e[h+b*P.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e[h+b*P.width];)g[2]++,h++;if(h==f)return NaN;for(;h<f&&!e[h+b*P.width]&&g[3]<c;)g[3]++,h++;if(h==f||g[3]>=c)return NaN;for(;h<f&&e[h+b*P.width]&&g[4]<c;)g[4]++,h++;if(g[4]>=c)return NaN;var i=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(i-d)>=d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},this.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2]+a[3]+a[4],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),a[2],d);if(!isNaN(f)&&(e=this.crossCheckHorizontal(Math.floor(e),Math.floor(f),a[2],d),!isNaN(e))){for(var g=d/7,h=!1,i=this.possibleCenters.length,j=0;j<i;j++){var k=this.possibleCenters[j];if(k.aboutEquals(g,f,e)){k.incrementCount(),h=!0;break}}if(!h){var l=new A(e,f,g);this.possibleCenters.push(l),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(l)}return!0}return!1},this.selectBestPatterns=function(){var a=this.possibleCenters.length;if(a<3)throw"Couldn't find enough finder patterns";if(a>3){for(var b=0,c=0,d=0;d<a;d++){var e=this.possibleCenters[d].EstimatedModuleSize;b+=e,c+=e*e}var f=b/a;this.possibleCenters.sort(function(a,b){var c=Math.abs(b.EstimatedModuleSize-f),d=Math.abs(a.EstimatedModuleSize-f);return c<d?-1:c==d?0:1});for(var g=Math.sqrt(c/a-f*f),h=Math.max(.2*f,g),d=0;d<this.possibleCenters.length&&this.possibleCenters.length>3;d++){var i=this.possibleCenters[d];Math.abs(i.EstimatedModuleSize-f)>h&&(this.possibleCenters.remove(d),d--)}}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(a,b){return a.count>b.count?-1:a.count<b.count?1:0}),new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2])},this.findRowSkip=function(){var a=this.possibleCenters.length;if(a<=1)return 0;for(var b=null,c=0;c<a;c++){var d=this.possibleCenters[c];if(d.Count>=aa){if(null!=b)return this.hasSkipped=!0,Math.floor((Math.abs(b.X-d.X)-Math.abs(b.Y-d.Y))/2);b=d}}return 0},this.haveMultiplyConfirmedCenters=function(){for(var a=0,b=0,c=this.possibleCenters.length,d=0;d<c;d++){var e=this.possibleCenters[d];e.Count>=aa&&(a++,b+=e.EstimatedModuleSize)}if(a<3)return!1;for(var f=b/c,g=0,d=0;d<c;d++)e=this.possibleCenters[d],g+=Math.abs(e.EstimatedModuleSize-f);return g<=.05*b},this.findFinderPattern=function(a){var b=!1;this.image=a;var c=P.height,d=P.width,e=Math.floor(3*c/(4*$));(e<Z||b)&&(e=Z);for(var f=!1,g=new Array(5),h=e-1;h<c&&!f;h+=e){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;for(var i=0,j=0;j<d;j++)if(a[j+h*P.width])1==(1&i)&&i++,g[i]++;else if(0==(1&i))if(4==i)if(this.foundPatternCross(g)){var k=this.handlePossibleCenter(g,h,j);if(k)if(e=2,this.hasSkipped)f=this.haveMultiplyConfirmedCenters();else{var l=this.findRowSkip();l>g[2]&&(h+=l-g[2]-e,j=d-1)}else{do{j++}while(j<d&&!a[j+h*P.width]);j--}i=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,i=3;else g[++i]++;else g[i]++;if(this.foundPatternCross(g)){var k=this.handlePossibleCenter(g,h,d);k&&(e=g[0],this.hasSkipped&&(f=haveMultiplyConfirmedCenters()))}}var m=this.selectBestPatterns();return P.orderBestPatterns(m),new B(m)}}function D(a,b,c){this.x=a,this.y=b,this.count=1,this.estimatedModuleSize=c,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return Math.floor(this.x)}),this.__defineGetter__("Y",function(){return Math.floor(this.y)}),this.incrementCount=function(){this.count++},this.aboutEquals=function(a,b,c){if(Math.abs(b-this.y)<=a&&Math.abs(c-this.x)<=a){var d=Math.abs(a-this.estimatedModuleSize);return d<=1||d/this.estimatedModuleSize<=1}return!1}}function E(a,b,c,d,e,f,g){this.image=a,this.possibleCenters=new Array,this.startX=b,this.startY=c,this.width=d,this.height=e,this.moduleSize=f,this.crossCheckStateCount=new Array(0,0,0),this.resultPointCallback=g,this.centerFromEnd=function(a,b){return b-a[2]-a[1]/2},this.foundPatternCross=function(a){for(var b=this.moduleSize,c=b/2,d=0;d<3;d++)if(Math.abs(b-a[d])>=c)return!1;return!0},this.crossCheckVertical=function(a,b,c,d){var e=this.image,f=P.height,g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;for(var h=a;h>=0&&e[b+h*P.width]&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&!e[b+h*P.width]&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e[b+h*P.width]&&g[1]<=c;)g[1]++,h++;if(h==f||g[1]>c)return NaN;for(;h<f&&!e[b+h*P.width]&&g[2]<=c;)g[2]++,h++;if(g[2]>c)return NaN;var i=g[0]+g[1]+g[2];return 5*Math.abs(i-d)>=2*d?NaN:this.foundPatternCross(g)?this.centerFromEnd(g,h):NaN},this.handlePossibleCenter=function(a,b,c){var d=a[0]+a[1]+a[2],e=this.centerFromEnd(a,c),f=this.crossCheckVertical(b,Math.floor(e),2*a[1],d);if(!isNaN(f)){for(var g=(a[0]+a[1]+a[2])/3,h=this.possibleCenters.length,i=0;i<h;i++){if(this.possibleCenters[i].aboutEquals(g,f,e))return new D(e,f,g)}var j=new D(e,f,g);this.possibleCenters.push(j),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(j)}return null},this.find=function(){for(var b=this.startX,e=this.height,f=b+d,g=c+(e>>1),h=new Array(0,0,0),i=0;i<e;i++){var j=g+(0==(1&i)?i+1>>1:-(i+1>>1));h[0]=0,h[1]=0,h[2]=0;for(var k=b;k<f&&!a[k+P.width*j];)k++;for(var l=0;k<f;){if(a[k+j*P.width])if(1==l)h[l]++;else if(2==l){if(this.foundPatternCross(h)){var m=this.handlePossibleCenter(h,j,k);if(null!=m)return m}h[0]=h[2],h[1]=1,h[2]=0,l=1}else h[++l]++;else 1==l&&l++,h[l]++;k++}if(this.foundPatternCross(h)){var m=this.handlePossibleCenter(h,j,f);if(null!=m)return m}}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"}}function F(a,b,c){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=a,this.numErrorCorrectionCode=c,
b<=9?this.dataLengthMode=0:b>=10&&b<=26?this.dataLengthMode=1:b>=27&&b<=40&&(this.dataLengthMode=2),this.getNextBits=function(a){var b=0;if(a<this.bitPointer+1){for(var c=0,d=0;d<a;d++)c+=1<<d;return c<<=this.bitPointer-a+1,b=(this.blocks[this.blockPointer]&c)>>this.bitPointer-a+1,this.bitPointer-=a,b}if(a<this.bitPointer+1+8){for(var e=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;return b=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1),this.blockPointer++,b+=this.blocks[this.blockPointer]>>8-(a-(this.bitPointer+1)),this.bitPointer=this.bitPointer-a%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}if(a<this.bitPointer+1+16){for(var e=0,f=0,d=0;d<this.bitPointer+1;d++)e+=1<<d;var g=(this.blocks[this.blockPointer]&e)<<a-(this.bitPointer+1);this.blockPointer++;var h=this.blocks[this.blockPointer]<<a-(this.bitPointer+1+8);this.blockPointer++;for(var d=0;d<a-(this.bitPointer+1+8);d++)f+=1<<d;f<<=8-(a-(this.bitPointer+1+8));return b=g+h+((this.blocks[this.blockPointer]&f)>>8-(a-(this.bitPointer+1+8))),this.bitPointer=this.bitPointer-(a-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),b}return 0},this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(a){for(var b=0;;){if(a>>b==1)break;b++}return this.getNextBits(P.sizeOfDataLengthInfo[this.dataLengthMode][b])},this.getRomanAndFigureString=function(a){var b=a,c=0,d="",e=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do{if(b>1){c=this.getNextBits(11);var f=Math.floor(c/45),g=c%45;d+=e[f],d+=e[g],b-=2}else 1==b&&(c=this.getNextBits(6),d+=e[c],b-=1)}while(b>0);return d},this.getFigureString=function(a){var b=a,c=0,d="";do{b>=3?(c=this.getNextBits(10),c<100&&(d+="0"),c<10&&(d+="0"),b-=3):2==b?(c=this.getNextBits(7),c<10&&(d+="0"),b-=2):1==b&&(c=this.getNextBits(4),b-=1),d+=c}while(b>0);return d},this.get8bitByteArray=function(a){var b=a,c=0,d=new Array;do{c=this.getNextBits(8),d.push(c),b--}while(b>0);return d},this.getKanjiString=function(a){var b=a,c=0,d="";do{c=getNextBits(13);var e=c%192,f=c/192,g=(f<<8)+e,h=0;h=g+33088<=40956?g+33088:g+49472,d+=String.fromCharCode(h),b--}while(b>0);return d},this.__defineGetter__("DataByte",function(){for(var a=new Array,b=1,c=2,d=4,e=8;;){var f=this.NextMode();if(0==f){if(a.length>0)break;throw"Empty data block"}if(f!=b&&f!=c&&f!=d&&f!=e)throw"Invalid mode: "+f+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(dataLength=this.getDataLength(f),dataLength<1)throw"Invalid data length: "+dataLength;switch(f){case b:for(var g=this.getFigureString(dataLength),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);a.push(h);break;case c:for(var g=this.getRomanAndFigureString(dataLength),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);a.push(h);break;case d:var j=this.get8bitByteArray(dataLength);a.push(j);break;case e:var g=this.getKanjiString(dataLength);a.push(g)}}return a})}function G(a){"use strict";function b(a){for(var b=Math.floor(a.length/c),d=[],e=ca.hashCode(a),f=0;f<=b+1;f++)if(0===f)d[f]=f+"/"+b+"/"+e+"$";else{var g=a.substr((f-1)*c,c);d[f]=f+"/"+ca.hashCode(g)+"$",d[f]+=g}return d}var c=ba.sliceSize,d=-1;a=a||null;var e=null;return a&&(e=b(a)),{setData:function(a){e=b(a)},getSlices:function(){return e},nextSlice:function(){return d=(d+1)%e.length,e[d]},getCurrentSlice:function(){return e[d]},getCurrentSliceIndex:function(){return d}}}function H(a,b){"use strict";var c={},d=function(){};switch(b){case"text":var e=new R(a);c=e,d=e.write;break;default:var f=new Q(a,{text:"",width:a.offsetWidth,height:a.offsetHeight,colorDark:"#000000",colorLight:"#ffffff",correctLevel:Q.CorrectLevel.L});c=f,d=f.makeCode}return{write:function(a){d.apply(c,[a])}}}function I(a){"use strict";var b=function(b){if(b.hasOwnProperty("error"))return console.log(b.error),b.error;a(b.data)};return P.callback=b,{read:function(a){"text"===ba.method?console.error("Text method not implemented."):P.decode(a)}}}function J(){"use strict";var a=[],b=0,c=null,d=null,e=null;return{addData:function(f){e=b;var g=f.split("$"),h=g.shift().split("/");if(b=parseInt(h[0]),3===h.length){c=parseInt(h[1]);var i=parseInt(h[2]);return void(d||(d=i))}var j=g.join("$");if(2===h.length){parseInt(h[1])==parseInt(ca.hashCode(j))&&(a[b]=j)}},getPrevious:function(){return e},getCurrent:function(){return b},done:function(){var a=this.merge();return ca.hashCode(a)===d?a:null},merge:function(){return a.join("")},getProgress:function(){var d=[],e=0,f=0;c?(f=c,d[0]=!0):f=a.length;for(var g=1;g<f;g++){a[g]?(e++,d[g]=!0):d[g]=!1}var h=0;return h=c?e/c:e/d.length,{total:c,found:e,progress:d,percent:h,current:b}}}}function K(a,b){"use strict";function c(a){for(var b=0;b<a.length;b++){var c=a[b];c.hasOwnProperty("kind")&&"video"===c.kind&&k.push(c)}d(k[j])}function d(b){var c={};c=!b||{optional:[{sourceId:b.id}]},l&&(l.stop(),a.src=null),navigator.getUserMedia?navigator.getUserMedia({video:c,audio:!1},e,f):console.error("Could not getUserMedia")}function e(b){l=b,navigator.mozGetUserMedia?a.mozSrcObject=l:"srcObject"in a?a.srcObject=l:a.src=window.URL&&window.URL.createObjectURL(l)||l,a.play()}function f(a){console.log("video error",a)}var g=null,h=!1,i=b.getContext("2d");navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var j=0,k=[],l=null;return MediaStreamTrack.getSources?MediaStreamTrack.getSources(c):d(),{canvasDraw:function(){var c=a,d=c.videoWidth,e=c.videoHeight;b.width=d,b.height=e,"text"===ba.method&&(b.height=e/4),i.drawImage(c,0,0,d,e)},startCanvasMirror:function(){h=!0,g=setInterval(this.canvasDraw,ba.scanningInterval)},stopCanvasMirror:function(){h=!1,clearInterval(g)},capture:function(){return b.toDataURL()},changeSource:function(){var a=!1;h&&(a=!0,this.stopCanvasMirror()),j=(j+1)%k.length,d(k[j]),a&&this.startCanvasMirror()}}}function L(a){if(ba.startTime||(ba.startTime=ea.now()),ba.duplexSending){return a==ga.getCurrentSliceIndex()&&da.write(ga.nextSlice()),void ba.reportProgress()}da.write(ha.getCurrent().toString()),ha.addData(a);var b=ha.done();b&&(console.log("done:",b),ba.finished=!0,ba.receiveDone(b)),ba.reportProgress()}var M,N,O,P,Q;!function(){function a(a){this.mode=j.MODE_8BIT_BYTE,this.data=a,this.parsedData=[];for(var b=0,c=this.data.length;b<c;b++){var d=[],e=this.data.charCodeAt(b);e>65536?(d[0]=240|(1835008&e)>>>18,d[1]=128|(258048&e)>>>12,d[2]=128|(4032&e)>>>6,d[3]=128|63&e):e>2048?(d[0]=224|(61440&e)>>>12,d[1]=128|(4032&e)>>>6,d[2]=128|63&e):e>128?(d[0]=192|(1984&e)>>>6,d[1]=128|63&e):d[0]=e,this.parsedData.push(d)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function b(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function c(a,b){if(void 0==a.length)throw new Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=new Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function d(a,b){this.totalCount=a,this.dataCount=b}function e(){this.buffer=[],this.length=0}function f(){return"undefined"!=typeof CanvasRenderingContext2D}function g(){var a=!1,b=navigator.userAgent;if(/android/i.test(b)){a=!0;var c=b.toString().match(/android ([0-9]\.[0-9])/i);c&&c[1]&&(a=parseFloat(c[1]))}return a}function h(a,b){for(var c=1,d=i(a),e=0,f=p.length;e<=f;e++){var g=0;switch(b){case k.L:g=p[e][0];break;case k.M:g=p[e][1];break;case k.Q:g=p[e][2];break;case k.H:g=p[e][3]}if(d<=g)break;c++}if(c>p.length)throw new Error("Too long data");return c}function i(a){var b=encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return b.length+(b.length!=a?3:0)}a.prototype={getLength:function(a){return this.parsedData.length},write:function(a){for(var b=0,c=this.parsedData.length;b<c;b++)a.put(this.parsedData[b],8)}},b.prototype={addData:function(b){var c=new a(b);this.dataList.push(c),this.dataCache=null},isDark:function(a,b){if(a<0||this.moduleCount<=a||b<0||this.moduleCount<=b)throw new Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[d][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,c),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=b.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,b){for(var c=-1;c<=7;c++)if(!(a+c<=-1||this.moduleCount<=a+c))for(var d=-1;d<=7;d++)b+d<=-1||this.moduleCount<=b+d||(this.modules[a+c][b+d]=0<=c&&c<=6&&(0==d||6==d)||0<=d&&d<=6&&(0==c||6==c)||2<=c&&c<=4&&2<=d&&d<=4)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;c<8;c++){this.makeImpl(!0,c);var d=m.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){var d=a.createEmptyMovieClip(b,c),e=1;this.make();for(var f=0;f<this.modules.length;f++)for(var g=f*e,h=0;h<this.modules[f].length;h++){var i=h*e,j=this.modules[f][h];j&&(d.beginFill(0,100),d.moveTo(i,g),d.lineTo(i+e,g),d.lineTo(i+e,g+e),d.lineTo(i,g+e),d.endFill())}return d},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=a%2==0);for(var b=8;b<this.moduleCount-8;b++)null==this.modules[6][b]&&(this.modules[6][b]=b%2==0)},setupPositionAdjustPattern:function(){for(var a=m.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var f=-2;f<=2;f++)for(var g=-2;g<=2;g++)this.modules[d+f][e+g]=-2==f||2==f||-2==g||2==g||0==f&&0==g}},setupTypeNumber:function(a){for(var b=m.getBCHTypeNumber(this.typeNumber),c=0;c<18;c++){var d=!a&&1==(b>>c&1);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;c<18;c++){var d=!a&&1==(b>>c&1);this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},setupTypeInfo:function(a,b){for(var c=this.errorCorrectLevel<<3|b,d=m.getBCHTypeInfo(c),e=0;e<15;e++){var f=!a&&1==(d>>e&1);e<6?this.modules[e][8]=f:e<8?this.modules[e+1][8]=f:this.modules[this.moduleCount-15+e][8]=f}for(var e=0;e<15;e++){var f=!a&&1==(d>>e&1);e<8?this.modules[8][this.moduleCount-e-1]=f:e<9?this.modules[8][15-e-1+1]=f:this.modules[8][15-e-1]=f}this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,f=0,g=this.moduleCount-1;g>0;g-=2)for(6==g&&g--;;){for(var h=0;h<2;h++)if(null==this.modules[d][g-h]){var i=!1;f<a.length&&(i=1==(a[f]>>>e&1));var j=m.getMask(b,d,g-h);j&&(i=!i),this.modules[d][g-h]=i,e--,-1==e&&(f++,e=7)}if((d+=c)<0||this.moduleCount<=d){d-=c,c=-c;break}}}},b.PAD0=236,b.PAD1=17,b.createData=function(a,c,f){for(var g=d.getRSBlocks(a,c),h=new e,i=0;i<f.length;i++){var j=f[i];h.put(j.mode,4),h.put(j.getLength(),m.getLengthInBits(j.mode,a)),j.write(h)}for(var k=0,i=0;i<g.length;i++)k+=g[i].dataCount;if(h.getLengthInBits()>8*k)throw new Error("code length overflow. ("+h.getLengthInBits()+">"+8*k+")");for(h.getLengthInBits()+4<=8*k&&h.put(0,4);h.getLengthInBits()%8!=0;)h.putBit(!1);for(;;){if(h.getLengthInBits()>=8*k)break;if(h.put(b.PAD0,8),h.getLengthInBits()>=8*k)break;h.put(b.PAD1,8)}return b.createBytes(h,g)},b.createBytes=function(a,b){for(var d=0,e=0,f=0,g=new Array(b.length),h=new Array(b.length),i=0;i<b.length;i++){var j=b[i].dataCount,k=b[i].totalCount-j;e=Math.max(e,j),f=Math.max(f,k),g[i]=new Array(j);for(var l=0;l<g[i].length;l++)g[i][l]=255&a.buffer[l+d];d+=j;var n=m.getErrorCorrectPolynomial(k),o=new c(g[i],n.getLength()-1),p=o.mod(n);h[i]=new Array(n.getLength()-1);for(var l=0;l<h[i].length;l++){var q=l+p.getLength()-h[i].length;h[i][l]=q>=0?p.get(q):0}}for(var r=0,l=0;l<b.length;l++)r+=b[l].totalCount;for(var s=new Array(r),t=0,l=0;l<e;l++)for(var i=0;i<b.length;i++)l<g[i].length&&(s[t++]=g[i][l]);for(var l=0;l<f;l++)for(var i=0;i<b.length;i++)l<h[i].length&&(s[t++]=h[i][l]);return s};for(var j={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},k={L:1,M:0,Q:3,H:2},l={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},m={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;m.getBCHDigit(b)-m.getBCHDigit(m.G15)>=0;)b^=m.G15<<m.getBCHDigit(b)-m.getBCHDigit(m.G15);return(a<<10|b)^m.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;m.getBCHDigit(b)-m.getBCHDigit(m.G18)>=0;)b^=m.G18<<m.getBCHDigit(b)-m.getBCHDigit(m.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return m.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case l.PATTERN000:return(b+c)%2==0;case l.PATTERN001:return b%2==0;case l.PATTERN010:return c%3==0;case l.PATTERN011:return(b+c)%3==0;case l.PATTERN100:return(Math.floor(b/2)+Math.floor(c/3))%2==0;case l.PATTERN101:return b*c%2+b*c%3==0;case l.PATTERN110:return(b*c%2+b*c%3)%2==0;case l.PATTERN111:return(b*c%3+(b+c)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new c([1],0),d=0;d<a;d++)b=b.multiply(new c([1,n.gexp(d)],0));return b},getLengthInBits:function(a,b){if(1<=b&&b<10)switch(a){case j.MODE_NUMBER:return 10;case j.MODE_ALPHA_NUM:return 9;case j.MODE_8BIT_BYTE:case j.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(b<27)switch(a){case j.MODE_NUMBER:return 12;case j.MODE_ALPHA_NUM:return 11;case j.MODE_8BIT_BYTE:return 16;case j.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else{if(!(b<41))throw new Error("type:"+b);switch(a){case j.MODE_NUMBER:return 14;case j.MODE_ALPHA_NUM:return 13;case j.MODE_8BIT_BYTE:return 16;case j.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;d<b;d++)for(var e=0;e<b;e++){for(var f=0,g=a.isDark(d,e),h=-1;h<=1;h++)if(!(d+h<0||b<=d+h))for(var i=-1;i<=1;i++)e+i<0||b<=e+i||0==h&&0==i||g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(var d=0;d<b-1;d++)for(var e=0;e<b-1;e++){var j=0;a.isDark(d,e)&&j++,a.isDark(d+1,e)&&j++,a.isDark(d,e+1)&&j++,a.isDark(d+1,e+1)&&j++,0!=j&&4!=j||(c+=3)}for(var d=0;d<b;d++)for(var e=0;e<b-6;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;e<b;e++)for(var d=0;d<b-6;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;e<b;e++)for(var d=0;d<b;d++)a.isDark(d,e)&&k++;return c+=Math.abs(100*k/b/b-50)/5*10}},n={glog:function(a){if(a<1)throw new Error("glog("+a+")");return n.LOG_TABLE[a]},gexp:function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return n.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},o=0;o<8;o++)n.EXP_TABLE[o]=1<<o;for(var o=8;o<256;o++)n.EXP_TABLE[o]=n.EXP_TABLE[o-4]^n.EXP_TABLE[o-5]^n.EXP_TABLE[o-6]^n.EXP_TABLE[o-8];for(var o=0;o<255;o++)n.LOG_TABLE[n.EXP_TABLE[o]]=o;c.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=new Array(this.getLength()+a.getLength()-1),d=0;d<this.getLength();d++)for(var e=0;e<a.getLength();e++)b[d+e]^=n.gexp(n.glog(this.get(d))+n.glog(a.get(e)));return new c(b,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var b=n.glog(this.get(0))-n.glog(a.get(0)),d=new Array(this.getLength()),e=0;e<this.getLength();e++)d[e]=this.get(e);for(var e=0;e<a.getLength();e++)d[e]^=n.gexp(n.glog(a.get(e))+b);return new c(d,0).mod(a)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(a,b){var c=d.getRsBlockTable(a,b);if(void 0==c)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var e=c.length/3,f=[],g=0;g<e;g++)for(var h=c[3*g+0],i=c[3*g+1],j=c[3*g+2],k=0;k<h;k++)f.push(new d(i,j));return f},d.getRsBlockTable=function(a,b){switch(b){case k.L:return d.RS_BLOCK_TABLE[4*(a-1)+0];case k.M:return d.RS_BLOCK_TABLE[4*(a-1)+1];case k.Q:return d.RS_BLOCK_TABLE[4*(a-1)+2];case k.H:return d.RS_BLOCK_TABLE[4*(a-1)+3];default:return}},e.prototype={get:function(a){var b=Math.floor(a/8);return 1==(this.buffer[b]>>>7-a%8&1)},put:function(a,b){for(var c=0;c<b;c++)this.putBit(1==(a>>>b-c-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}};var p=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],q=function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){function b(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}var c=this._htOption,d=this._el,e=a.getModuleCount();Math.floor(c.width/e),Math.floor(c.height/e);this.clear();var f=b("svg",{viewBox:"0 0 "+String(e)+" "+String(e),width:"100%",height:"100%",fill:c.colorLight});f.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),d.appendChild(f),f.appendChild(b("rect",{fill:c.colorLight,width:"100%",height:"100%"})),f.appendChild(b("rect",{fill:c.colorDark,width:"1",height:"1",id:"template"}));for(var g=0;g<e;g++)for(var h=0;h<e;h++)if(a.isDark(g,h)){var i=b("use",{x:String(g),y:String(h)});i.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),f.appendChild(i)}},a.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},a}(),r="svg"===document.documentElement.tagName.toLowerCase(),s=r?q:f()?function(){function a(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function b(a,b){var c=this;if(c._fFail=b,c._fSuccess=a,null===c._bSupportDataURI){var d=document.createElement("img"),e=function(){c._bSupportDataURI=!1,c._fFail&&c._fFail.call(c)},f=function(){c._bSupportDataURI=!0,c._fSuccess&&c._fSuccess.call(c)};return d.onabort=e,d.onerror=e,d.onload=f,void(d.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===c._bSupportDataURI&&c._fSuccess?c._fSuccess.call(c):!1===c._bSupportDataURI&&c._fFail&&c._fFail.call(c)}if(this._android&&this._android<=2.1){var c=1/window.devicePixelRatio,d=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(a,b,e,f,g,h,i,j,k){if("nodeName"in a&&/img/i.test(a.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*c;else void 0===j&&(arguments[1]*=c,arguments[2]*=c,arguments[3]*=c,arguments[4]*=c);d.apply(this,arguments)}}var e=function(a,b){this._bIsPainted=!1,this._android=g(),this._htOption=b,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=b.width,this._elCanvas.height=b.height,a.appendChild(this._elCanvas),this._el=a,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return e.prototype.draw=function(a){var b=this._elImage,c=this._oContext,d=this._htOption,e=a.getModuleCount(),f=d.width/e,g=d.height/e,h=Math.round(f),i=Math.round(g);b.style.display="none",this.clear();for(var j=0;j<e;j++)for(var k=0;k<e;k++){var l=a.isDark(j,k),m=k*f,n=j*g;c.strokeStyle=l?d.colorDark:d.colorLight,c.lineWidth=1,c.fillStyle=l?d.colorDark:d.colorLight,c.fillRect(m,n,f,g),c.strokeRect(Math.floor(m)+.5,Math.floor(n)+.5,h,i),c.strokeRect(Math.ceil(m)-.5,Math.ceil(n)-.5,h,i)}this._bIsPainted=!0},e.prototype.makeImage=function(){this._bIsPainted&&b.call(this,a)},e.prototype.isPainted=function(){return this._bIsPainted},e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},e.prototype.round=function(a){return a?Math.floor(1e3*a)/1e3:a},e}():function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){for(var b=this._htOption,c=this._el,d=a.getModuleCount(),e=Math.floor(b.width/d),f=Math.floor(b.height/d),g=['<table style="border:0;border-collapse:collapse;">'],h=0;h<d;h++){g.push("<tr>");for(var i=0;i<d;i++)g.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+e+"px;height:"+f+"px;background-color:"+(a.isDark(h,i)?b.colorDark:b.colorLight)+';"></td>');g.push("</tr>")}g.push("</table>"),c.innerHTML=g.join("");var j=c.childNodes[0],k=(b.width-j.offsetWidth)/2,l=(b.height-j.offsetHeight)/2;k>0&&l>0&&(j.style.margin=l+"px "+k+"px")},a.prototype.clear=function(){this._el.innerHTML=""},a}();Q=function(a,b){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:k.H},"string"==typeof b&&(b={text:b}),b)for(var c in b)this._htOption[c]=b[c];"string"==typeof a&&(a=document.getElementById(a)),this._htOption.useSVG&&(s=q),this._android=g(),this._el=a,this._oQRCode=null,this._oDrawing=new s(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},Q.prototype.makeCode=function(a){this._oQRCode=new b(h(a,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(a),this._oQRCode.make(),this._el.title=a,this._oDrawing.draw(this._oQRCode),this.makeImage()},Q.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},Q.prototype.clear=function(){this._oDrawing.clear()},Q.CorrectLevel=k}();var R=function(a){var b=a;return{write:function(a){b.innerHTML=a}}};M={},M.checkAndNudgePoints=function(a,b){for(var c=P.width,d=P.height,e=!0,f=0;f<b.length&&e;f+=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(g<-1||g>c||h<-1||h>d)throw"Error.checkAndNudgePoints ";e=!1,-1==g?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),-1==h?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}e=!0;for(var f=b.length-2;f>=0&&e;f-=2){var g=Math.floor(b[f]),h=Math.floor(b[f+1]);if(g<-1||g>c||h<-1||h>d)throw"Error.checkAndNudgePoints ";e=!1,-1==g?(b[f]=0,e=!0):g==c&&(b[f]=c-1,e=!0),-1==h?(b[f+1]=0,e=!0):h==d&&(b[f+1]=d-1,e=!0)}},M.sampleGrid3=function(a,b,c){for(var d=new k(b),e=new Array(b<<1),f=0;f<b;f++){for(var g=e.length,h=f+.5,i=0;i<g;i+=2)e[i]=.5+(i>>1),e[i+1]=h;c.transformPoints1(e),M.checkAndNudgePoints(a,e);try{for(var i=0;i<g;i+=2){var j=4*Math.floor(e[i])+Math.floor(e[i+1])*P.width*4,l=a[Math.floor(e[i])+P.width*Math.floor(e[i+1])];P.imagedata.data[j]=l?255:0,P.imagedata.data[j+1]=l?255:0,P.imagedata.data[j+2]=0,P.imagedata.data[j+3]=255,l&&d.set_Renamed(i>>1,f)}}catch(m){throw"Error.checkAndNudgePoints"}}return d},M.sampleGridx=function(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=f.quadrilateralToQuadrilateral(c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s);return M.sampleGrid3(a,b,t)},d.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),d.VERSIONS=e(),d.getVersionForNumber=function(a){if(a<1||a>40)throw"ArgumentException";return d.VERSIONS[a-1]},d.getProvisionalVersionForDimension=function(a){if(a%4!=1)throw"Error getProvisionalVersionForDimension";try{return d.getVersionForNumber(a-17>>2)}catch(b){throw"Error getVersionForNumber"}},d.decodeVersionInformation=function(a){for(var b=4294967295,c=0,e=0;e<d.VERSION_DECODE_INFO.length;e++){var f=d.VERSION_DECODE_INFO[e];if(f==a)return this.getVersionForNumber(e+7);var g=i.numBitsDiffering(a,f);g<b&&(c=e+7,b=g)}return b<=3?this.getVersionForNumber(c):null},f.quadrilateralToQuadrilateral=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.quadrilateralToSquare(a,b,c,d,e,f,g,h);return this.squareToQuadrilateral(i,j,k,l,m,n,o,p).times(q)},f.squareToQuadrilateral=function(a,b,c,d,e,g,h,i){return dy2=i-g,dy3=b-d+g-i,0==dy2&&0==dy3?new f(c-a,e-c,a,d-b,g-d,b,0,0,1):(dx1=c-e,dx2=h-e,dx3=a-c+e-h,dy1=d-g,denominator=dx1*dy2-dx2*dy1,a13=(dx3*dy2-dx2*dy3)/denominator,a23=(dx1*dy3-dx3*dy1)/denominator,new f(c-a+a13*c,h-a+a23*h,a,d-b+a13*d,i-b+a23*i,b,a13,a23,1))},f.quadrilateralToSquare=function(a,b,c,d,e,f,g,h){return this.squareToQuadrilateral(a,b,c,d,e,f,g,h).buildAdjoint()};var S=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),T=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);i.numBitsDiffering=function(a,b){return a^=b,T[15&a]+T[15&z(a,4)]+T[15&z(a,8)]+T[15&z(a,12)]+T[15&z(a,16)]+T[15&z(a,20)]+T[15&z(a,24)]+T[15&z(a,28)]},i.decodeFormatInformation=function(a){var b=i.doDecodeFormatInformation(a);return null!=b?b:i.doDecodeFormatInformation(21522^a)},i.doDecodeFormatInformation=function(a){for(var b=4294967295,c=0,d=0;d<S.length;d++){var e=S[d],f=e[0];if(f==a)return new i(e[1]);var g=this.numBitsDiffering(a,f);g<b&&(c=e[1],b=g)}return b<=3?new i(c):null},j.forBits=function(a){if(a<0||a>=Y.length)throw"ArgumentException";return Y[a]};var U=new j(0,1,"L"),V=new j(1,0,"M"),W=new j(2,3,"Q"),X=new j(3,2,"H"),Y=new Array(V,U,X,W);l.getDataBlocks=function(a,b,c){if(a.length!=b.TotalCodewords)throw"ArgumentException";for(var d=b.getECBlocksForLevel(c),e=0,f=d.getECBlocks(),g=0;g<f.length;g++)e+=f[g].Count;for(var h=new Array(e),i=0,j=0;j<f.length;j++)for(var k=f[j],g=0;g<k.Count;g++){var m=k.DataCodewords,n=d.ECCodewordsPerBlock+m;h[i++]=new l(m,new Array(n))}for(var o=h[0].codewords.length,p=h.length-1;p>=0;){if(h[p].codewords.length==o)break;p--}p++;for(var q=o-d.ECCodewordsPerBlock,r=0,g=0;g<q;g++)for(var j=0;j<i;j++)h[j].codewords[g]=a[r++];for(var j=p;j<i;j++)h[j].codewords[q]=a[r++];for(var s=h[0].codewords.length,g=q;g<s;g++)for(var j=0;j<i;j++){var t=j<p?g:g+1;h[j].codewords[t]=a[r++]}return h},N={},N.forReference=function(a){if(a<0||a>7)throw"System.ArgumentException";return N.DATA_MASKS[a]},N.DATA_MASKS=new Array(new n,new o,new q,new r,new s,new t,new u,new v),y.QR_CODE_FIELD=new y(285),y.DATA_MATRIX_FIELD=new y(301),y.addOrSubtract=function(a,b){return a^b},O={},O.rsDecoder=new w(y.QR_CODE_FIELD),O.correctErrors=function(a,b){for(var c=a.length,d=new Array(c),e=0;e<c;e++)d[e]=255&a[e];var f=a.length-b;try{O.rsDecoder.decode(d,f)}catch(g){throw g}for(var e=0;e<b;e++)a[e]=d[e]},O.decode=function(a){for(var b=new m(a),c=b.readVersion(),d=b.readFormatInformation().ErrorCorrectionLevel,e=b.readCodewords(),f=l.getDataBlocks(e,c,d),g=0,h=0;h<f.length;h++)g+=f[h].NumDataCodewords;for(var i=new Array(g),j=0,k=0;k<f.length;k++){var n=f[k],o=n.Codewords,p=n.NumDataCodewords;O.correctErrors(o,p);for(var h=0;h<p;h++)i[j++]=o[h]}return new F(i,c.VersionNumber,d.Bits)},
P={},P.imagedata=null,P.width=0,P.height=0,P.qrCodeSymbol=null,P.debug=!1,P.maxImgSize=1048576,P.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],P.callback=null,P.decode=function(a){"use strict";var a=a,b=a.getContext("2d"),c={};P.width=a.width,P.height=a.height,P.imagedata=b.getImageData(0,0,P.width,P.height);try{c=P.process(b)}catch(d){return{error:d}}return null!==P.callback&&P.callback(c),c},P.isUrl=function(a){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(a)},P.decode_url=function(a){var b="";try{b=escape(a)}catch(d){console.log(d),b=a}var c="";try{c=decodeURIComponent(b)}catch(d){console.log(d),c=b}return c},P.decode_utf8=function(a){return P.isUrl(a)?P.decode_url(a):a},P.process=function(a){var b=ea.now(),c=P.grayScaleToBitmap(P.grayscale());if(P.debug){for(var d=0;d<P.height;d++)for(var e=0;e<P.width;e++){var f=4*e+d*P.width*4;P.imagedata.data[f]=(c[e+d*P.width],0),P.imagedata.data[f+1]=(c[e+d*P.width],0),P.imagedata.data[f+2]=c[e+d*P.width]?255:0}a.putImageData(P.imagedata,0,0)}var g=new h(c),i=g.detect();P.debug&&a.putImageData(P.imagedata,0,0);for(var j=O.decode(i.bits),k=j.DataByte,l="",m=0;m<k.length;m++)for(var n=0;n<k[m].length;n++)l+=String.fromCharCode(k[m][n]);var o=ea.now(),p=o-b;return{data:P.decode_utf8(l),time:p}},P.getPixel=function(a,b){if(P.width<a)throw"point error";if(P.height<b)throw"point error";return point=4*a+b*P.width*4,p=(33*P.imagedata.data[point]+34*P.imagedata.data[point+1]+33*P.imagedata.data[point+2])/100,p},P.binarize=function(a){for(var b=new Array(P.width*P.height),c=0;c<P.height;c++)for(var d=0;d<P.width;d++){var e=P.getPixel(d,c);b[d+c*P.width]=e<=a}return b},P.getMiddleBrightnessPerArea=function(a){for(var b=4,c=Math.floor(P.width/b),d=Math.floor(P.height/b),e=new Array(b),f=0;f<b;f++){e[f]=new Array(b);for(var g=0;g<b;g++)e[f][g]=new Array(0,0)}for(var h=0;h<b;h++)for(var i=0;i<b;i++){e[i][h][0]=255;for(var j=0;j<d;j++)for(var k=0;k<c;k++){var l=a[c*i+k+(d*h+j)*P.width];l<e[i][h][0]&&(e[i][h][0]=l),l>e[i][h][1]&&(e[i][h][1]=l)}}for(var m=new Array(b),n=0;n<b;n++)m[n]=new Array(b);for(var h=0;h<b;h++)for(var i=0;i<b;i++)m[i][h]=Math.floor((e[i][h][0]+e[i][h][1])/2);return m},P.grayScaleToBitmap=function(a){for(var b=P.getMiddleBrightnessPerArea(a),c=b.length,d=Math.floor(P.width/c),e=Math.floor(P.height/c),f=new Array(P.height*P.width),g=0;g<c;g++)for(var h=0;h<c;h++)for(var i=0;i<e;i++)for(var j=0;j<d;j++)f[d*h+j+(e*g+i)*P.width]=a[d*h+j+(e*g+i)*P.width]<b[h][g];return f},P.grayscale=function(){for(var a=new Array(P.width*P.height),b=0;b<P.height;b++)for(var c=0;c<P.width;c++){var d=P.getPixel(c,b);a[c+b*P.width]=d}return a},Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);return this.length=a<0?this.length+a:a,this.push.apply(this,c)};var Z=3,$=57,_=8,aa=2;if(P.orderBestPatterns=function(a){function b(a,b){return xDiff=a.X-b.X,yDiff=a.Y-b.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)}function c(a,b,c){var d=b.x,e=b.y;return(c.x-d)*(a.y-e)-(c.y-e)*(a.x-d)}var d,e,f,g=b(a[0],a[1]),h=b(a[1],a[2]),i=b(a[0],a[2]);if(h>=g&&h>=i?(e=a[0],d=a[1],f=a[2]):i>=h&&i>=g?(e=a[1],d=a[0],f=a[2]):(e=a[2],d=a[0],f=a[1]),c(d,e,f)<0){var j=d;d=f,f=j}a[0]=d,a[1]=e,a[2]=f},!a)return console.error("DisplaySocket needs a constructor"),null;if(!a.output&&!a.video)return console.error("DisplaySocket needs an output element or a video element to work"),null;var ba={iface:{}};if(ba.finished=!1,ba.sliceSize=a.sliceSize||250,ba.baseInterval=a.baseInterval||30,ba.scanningInterval=a.scanningInterval||ba.baseInterval,ba.sendingInterval=a.sendingInterval||4*ba.baseInterval,a.method)return void console.error("Only qrcode method enabled for this build.");ba.method=a.method||"qrcode",ba.videoElement=a.video||null,ba.output=a.output||null,a.videoMirrorCanvas?ba.videoMirrorCanvas=a.videoMirrorCanvas:(ba.videoMirrorCanvas=document.createElement("canvas"),document.body.appendChild(ba.videoMirrorCanvas)),ba.wait=a.wait||!1;var ca={};ca.hashCode=function(a){var b,c,d,e=0;if(0===a.length)return e;for(b=0,d=a.length;b<d;b++)c=a.charCodeAt(b),e+=c%123;return e};var da={};da=ba.output?new H(ba.output,ba.method):{write:function(){}};var ea,fa=new I(L),ga=new G,ha=new J;return ea=window&&window.performance?window.performance:{now:function(){return(new Date).getTime()}},ba.startTime=null,ba.endTime=null,ba.startRecording=function(){ba.video?console.log("already recording"):(ba.video=new K(ba.videoElement,ba.videoMirrorCanvas),ba.video.startCanvasMirror())},ba.sendLoopTimeout=null,ba.simplexSendLoop=function(){da.write(ga.nextSlice()),ba.sendLoopTimeout=setTimeout(ba.simplexSendLoop,ba.sendingInterval)},ba.duplexSendTimeout=null,ba.duplexSend=function(){ba.scan(),ba.duplexLoopTimeout=setTimeout(ba.duplexSend,ba.sendingInterval)},ba.iface.send=function(a){if(!ba.output)return void console.error("Tried to send data without supplying output element");ba.sending=!0,ga.setData(a),ba.videoElement?(ba.startRecording(),da.write(ga.nextSlice()),ba.duplexSending=!0,ba.duplexSend()):ba.simplexSendLoop()},ba.receiveLoop=function(){ba.scan(),ba.finished||(ba.receiveLoopTimeout=setTimeout(ba.receiveLoop,ba.scanningInterval))},ba.iface.onmessage=function(){},ba.iface.onprogress=function(){},ba.receiveDone=function(a){var b={};b.data=a,ba.endTime=ea.now(),b.time=ba.endTime-ba.startTime,ba.iface.onmessage(b),ba.fireEvent("message",[b])},ba.reportProgress=function(){if(ha.getPrevious()!==ha.getCurrent()){var a=ha.getProgress();ba.iface.onprogress(a),ba.fireEvent("progress",[a])}},ba.receive=function(){if(ba.finished=!1,ba.startRecording(),!ba.video)return void console.error("Tried to receive data without supplying video element");ba.receiveLoop()},ba.scan=function(){0!==ba.videoMirrorCanvas.width&&fa.read(ba.videoMirrorCanvas)},ba.iface.nextVideoSource=function(){ba.video?ba.video.changeSource():console.warn("tried to change video source but there was no video")},ba.events={},ba.iface.addEventListener=function(a,b){ba.events.hasOwnProperty(a)?ba.events[a].push(b):ba.events[a]=[b]},ba.iface.removeEventListener=function(a,b){if(ba.events.hasOwnProperty(a)){var c=ba.events[a].indexOf(b);-1!==c&&ba.events[a].splice(c,1)}},ba.fireEvent=function(a,b){if(ba.events.hasOwnProperty(a)){b&&b.length||(b=[]);for(var c=ba.events[a],d=0;d<c.length;d++)c[d].apply(null,b)}},!ba.wait&&ba.videoElement&&ba.receive(),ba.iface};